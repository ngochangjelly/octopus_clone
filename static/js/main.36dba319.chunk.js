(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),l=n(21),r=n.n(l),o=n(13),c=n(18),d=n(2),s=n(22);function u(e){var t=e.name;e.className,e.style;switch(t){case"add":return a.a.createElement(s.a,{className:"w-12 h-12 text-white z-100",style:{color:"#2f7fef"}});case"minus":return a.a.createElement(s.c,{className:"w-12 h-12",style:{color:"red"}});default:return null}}var h=function(e){switch(e){case"isFirstChild":return"right-connect-line";case"isChild":return"full-connect-line";case"isLastChild":return"left-connect-line";default:return""}},v=(n(86),n(24));var p=function(e){var t=function(){var e=Object(i.useState)(!0),t=Object(o.a)(e,2),n=(t[0],t[1]);return function(){return n(function(e){return!e})}}(),n=e.cell.value,l=(n.name,n.id),r=n.root,d=n.position,p=e.handleAddChild,f=e.handleAddSibling,m=e.handleRemoveCell,g=e.handleAppendChild,b=e.handleAppendSibling,E=e.activeCell,_=e.setActiveCell,y=Object(i.useState)(!1),N=Object(o.a)(y,2),w=(N[0],N[1]),C=Object(i.useState)(null),A=Object(o.a)(C,2),O=A[0],I=A[1],j=a.a.createRef(),S=function(e){var t=e.target.getAttribute("id"),n=e.target.getAttribute("name");(null===t||void 0===t?void 0:t.includes("sibling-dropzone"))&&I(t),"child-dropzone"===n&&I("child-dropzone-".concat(void 0)),e.preventDefault()},R=function(e,n){e.preventDefault();var i=document.getElementById(l),a=e.target,r=a.getAttribute("id");n=e.dataTransfer.getData("cell");if(n=JSON.parse(n),i.hasChildNodes(a)&&"right-sibling-dropzone"!==a.getAttribute("name")&&"left-sibling-dropzone"!==a.getAttribute("name")&&(r=r.replace(/edit-/g,"")||r,g(n,r),t()),"right-sibling-dropzone"===e.target.getAttribute("name")){e.target.style.className="is-dragging",r=r.replace(/right-sibling-dropzone-/g,""),b("right",n,r);var o=document.getElementsByClassName("cell");Object(c.a)(o).map(function(e){e.classList.remove("on-right-dragged-over","on-left-dragged-over")})}"left-sibling-dropzone"===e.target.getAttribute("name")&&(r=r.replace(/left-sibling-dropzone-/g,""),b("left",n,r)),w(!1),I(null),t()};return a.a.createElement("div",{className:v(h(d))},a.a.createElement("div",{className:v("relative")},a.a.createElement("div",{className:v("cell cell-width mt-12 h-32 flex justify-center relative",(null===O||void 0===O?void 0:O.includes(l))&&(null===O||void 0===O?void 0:O.includes("right"))&&"on-right-dragged-over",(null===O||void 0===O?void 0:O.includes(l))&&(null===O||void 0===O?void 0:O.includes("left"))&&"on-left-dragged-over")},!r&&a.a.createElement("div",{className:v("w-24 h-32 left-dz bg-red absolute left-0 top-0 dropzone bg-gray-100"),name:"left-sibling-dropzone",id:"left-sibling-dropzone-".concat(l),onDrop:function(t){return R(t,e.cell)},onDragOver:function(e){return S(e)}}),a.a.createElement("div",{id:l,name:"child-dropzone",className:v("border main-border rounded-lg w-56 h-24",!r&&"absolute above-line",e.cell.children.length>0&&"absolute below-line"),onDragStart:function(t){return n=t,i=e.cell,w(!0),void n.dataTransfer.setData("cell",JSON.stringify(i));var n,i},draggable:!r&&"true",onDrop:function(t){R(t,e.cell)},onDragOver:function(e){return S(e)}},a.a.createElement("div",{className:v("flex items-center h-4 w-full main-border-bottom",!r&&"draggable",E===l&&"main-bg")},a.a.createElement(s.b,{className:v("text-4xl font-semibold pl-2",l===E?"text-white":"main-text-color")})),a.a.createElement("div",{ref:j,className:"relative px-2 py-2 text-xl font-semibold main-text-color",id:"edit-".concat(l),onClick:function(e){return function(e){e.target.getAttribute("id").includes(l)&&(E||_(l),E&&_(null),E!==l&&_(l))}(e)}},l)),!r&&E!==l&&a.a.createElement("div",{className:["absolute opacity-0 hover:opacity-100 flex justify-center w-12 h-32 top-0 right-0"],onClick:function(){f(e.cell.value)}},a.a.createElement(u,{name:"add",className:"absolute"})),!r&&a.a.createElement("div",{className:v("w-24 h-32 right-dz bg-red absolute top-0 right-0 dropzone bg-gray-100"),name:"right-sibling-dropzone",id:"right-sibling-dropzone-".concat(l),onDrop:function(t){return R(t,e.cell)},onDragOver:function(e){return S(e)},onDragLeave:function(e){return(t=e).target.getAttribute("id").includes("sibling-dropzone")&&I(null),void("child-dropzone"===t.target.getAttribute("name")&&I(null));var t}}),E!==l&&a.a.createElement("div",{className:["absolute bottom-0 opacity-0 hover:opacity-100 flex justify-center w-56 h-8"],onClick:function(){p(e.cell.value)}},a.a.createElement(u,{name:"add",className:"absolute z-100"})),E===l&&!r&&a.a.createElement("div",{id:"remove".concat(l),className:v("absolute bottom-0 right-0 flex justify-center w-56 h-8",E===l?"opacity-1":"opacity-0"),onClick:function(){m(e.cell.value)}},a.a.createElement(u,{id:"remove".concat(l),name:"minus"})))))},f=(Object(d.b)(function(e){})(p),n(50)),m=n(24);var g=function(e){var t,n;return e&&(null===(t=document)||void 0===t?void 0:null===(n=t.getElementById(e))||void 0===n?void 0:n.offsetWidth)},b=Object(d.b)(function(e){return{tree:e.tree.tree._root}},function(e){return{dispatchAddChild:function(t){e(function(e){return{type:"ADD_CHILD",cell:e}}(t))},dispatchAppendChild:function(t,n){e(function(e,t){return{type:"APPEND_CHILD",parentId:t,cell:e}}(t,n))},dispatchAddSibling:function(t){e(function(e){return{type:"ADD_SIBLING",cell:e}}(t))},dispatchRemoveCell:function(t){e(function(e){return{type:"REMOVE_CELL",cell:e}}(t))},dispatchAppendSibling:function(t,n,i){e(function(e,t,n){switch(e){case"right":return{type:"APPEND_RIGHT_SIBLING",cell:t,siblingId:n};case"left":return{type:"APPEND_LEFT_SIBLING",cell:t,siblingId:n};default:return null}}(t,n,i))}}})(function e(t){var n,l,r=function(){var e=Object(i.useState)(!0),t=Object(o.a)(e,2),n=(t[0],t[1]);return function(){return n(function(e){return!e})}}(),c=t.tree,d=t.toggleEstimation,s=Object(i.useState)(null),u=Object(o.a)(s,2),h=u[0],v=u[1],b=t.dispatchAddChild,E=t.dispatchAppendChild,_=t.dispatchAddSibling,y=t.dispatchRemoveCell,N=t.dispatchAppendSibling,w=function(e){var t={value:{group:"body",id:f(),name:"name",parentId:e.id,hasChildren:!1},children:[]};b(t),r()},C=function(e,t){e.value.id!==t&&E(e,t),r()},A=function(e){var t={value:{group:"body",id:f(),name:"name",parentId:e.parentId,siblingId:e.id,hasChildren:!1},children:[]};_(t),r()},O=function(e,t,n){N(e,t,n),r()},I=function(e){y(e),r()};return a.a.createElement("div",{className:[d&&"pointer-events-none"]},a.a.createElement("div",{className:"flex justify-center"},(null===c||void 0===c?void 0:null===(n=c.value)||void 0===n?void 0:n.root)&&a.a.createElement(p,{activeCell:h,setActiveCell:v,cell:c,handleAddChild:w,handleAddSibling:A,handleAppendSibling:O})),a.a.createElement("div",{className:"flex justify-center"},(null===c||void 0===c?void 0:null===(l=c.children)||void 0===l?void 0:l.length)>0&&c.children.map(function(t,n){return a.a.createElement("div",{id:t.value.id,key:n,className:m("flex flex-col items-center relative")},a.a.createElement(p,{activeCell:h,setActiveCell:v,key:n,cell:t,handleAddChild:w,handleAppendChild:C,handleAddSibling:A,handleAppendSibling:O,handleRemoveCell:I}),t.children.length>0&&a.a.createElement(e,{nodeWidth:g(t.value.id),id:t.value.id,tree:t,dispatchAddChild:b,dispatchAppendChild:E,dispatchAddSibling:_,dispatchRemoveCell:y,dispatchAppendSibling:N}))})))}),E=n(28),_=Object(d.b)(function(e){return{toggleEstimation:e.toggleEstimation}},function(e){return{dispatchToggleEstimation:function(t){e(function(e){return{type:"TOGGLE_ESTIMATION",isOpen:e}}(t))}}})(function(e){var t=e.toggleEstimation,n=e.dispatchToggleEstimation;return a.a.createElement("div",{className:"flex justify-end"},a.a.createElement("button",{onClick:function(){n(!t)},className:"w-12 h-12 bg-button flex justify-center items-center"},a.a.createElement(E.a,null)))}),y=n(29),N=n(30),w=n(73),C=n(70),A=n(23),O=n(74),I=n(71),j=n.n(I),S=["ITEM","RATE","HOURS","AMOUNT"],R=n(24),x=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(C.a)(t).call(this,e))).handleAddRow=function(e){n.props.dispatchAddRow(e)},n.handleRemoveRow=function(e){window.confirm("Confirm removing row?")&&(e&&n.props.dispatchRemoveRow(e),n.forceUpdate())},n.onDragEnd=function(e,t){var i=n.props.estimation,a=i.splice(e,1)[0];i.splice(t,0,a),n.props.dispatchArrangeRow(i)},n.dragProps={onDragEnd:n.onDragEnd,nodeSelector:"li",handleSelector:"a"},n.handleAddRow=n.handleAddRow.bind(Object(A.a)(n)),n.state={parentId:""},n.setState=n.setState.bind(Object(A.a)(n)),n}return Object(O.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById("estimationTable").addEventListener("keypress",function(t){if(13===(t.which||t.keyCode)){var n=t.target.getAttribute("id").replace(/input-/g,"");e.handleAddRow(n)}})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{id:"estimationTable",className:"w-full"},a.a.createElement(j.a,this.dragProps,a.a.createElement("div",{className:"w-full flex"},S.map(function(e,t){return a.a.createElement("div",{className:R(["w-1/".concat(S.length),"primary-grey mb-6 font-semibold"]),key:t},e)})),a.a.createElement("ol",{className:"w-full"},this.props.estimation.map(function(t,n){return a.a.createElement("li",{className:"text-white flex estimation-row h-16",key:n},a.a.createElement("div",{className:"flex items-center w-1/4 border grey-border"},a.a.createElement("a",{className:"-ml-3 mr-3 cursor-pointer",onClick:function(){return e.handleRemoveRow(t)}},a.a.createElement("div",{className:"bg-red-700 rounded-full w-6 h-6 text-white text-xl flex justify-center items-center"},"-")),a.a.createElement("input",{id:"input-".concat(t.id),className:"w-full h-full bg-transparent focus:outline-none",type:"text",placeholder:t.title})),a.a.createElement("div",{className:"w-1/4 border grey-border"},a.a.createElement("input",{className:"w-full h-full bg-transparent focus:outline-none focus:bg",type:"text",placeholder:"$".concat(t.rate)})),a.a.createElement("div",{className:"w-1/4 border grey-border"},a.a.createElement("input",{className:"w-full h-full bg-transparent focus:outline-none focus:bg",type:"text",placeholder:t.hours})),a.a.createElement("div",{className:"w-1/4 border grey-border flex justify-between items-center"},a.a.createElement("input",{className:"w-full h-full bg-transparent focus:outline-none focus:bg",type:"text",placeholder:t.amount}),a.a.createElement("a",null,a.a.createElement(E.b,null))))}))),a.a.createElement("div",{onClick:function(){e.handleAddRow()},className:"primary-grey h-16 flex justify-start items-center border-b grey-border cursor-pointer"},"Add row"))}}]),t}(a.a.Component),D=Object(d.b)(function(e){return{estimation:e.estimation}},function(e){return{dispatchArrangeRow:function(t){e(function(e){return{type:"ARRANGE_ROW",data:e}}(t))},dispatchAddRow:function(t){e(function(e){return{type:"ADD_ROW",id:e}}(t))},dispatchRemoveRow:function(t){e(function(e){return{type:"REMOVE_ROW",data:e}}(t))}}})(x),L=function(){return a.a.createElement("div",{className:"flex flex-col items-center justify-center"},a.a.createElement(D,null))},k=n(24),z=Object(d.b)(function(e){return{toggleEstimation:e.toggleEstimation}})(function(e){var t=e.toggleEstimation;return a.a.createElement("div",{className:k("wrapper flex",!t&&"flex-col")},a.a.createElement("div",{className:k([t?"w-1/2 px-8 mt-24 overflow-hidden ":"w-full px-8 mt-24"])},a.a.createElement(_,null),a.a.createElement(b,{toggleEstimation:t,store:e.store})),t&&a.a.createElement("div",{className:"estimation-panel w-1/2 h-screen"},a.a.createElement(L,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(134);var T=n(5),P=n(7),F=function(){function e(t){Object(y.a)(this,e),this._root=t||null}return Object(N.a)(e,[{key:"_buildTree",value:function(e){this._root=G}},{key:"_traverse",value:function(e){!function t(n){e(n),n.children.forEach(function(e){t(e)})}(this._root)}},{key:"_addNode",value:function(e,t){var n={value:e,children:[]};null!==this._root?this._traverse(function(n){if(n.value.id===t)return n.children.push(e)}):this._root=n}},{key:"_addSibling",value:function(e,t,n,i){"right"===i&&this._traverse(function(i){var a;if(i.value.id===t)return i.children.map(function(e,t){e.value.id===n&&(a=t)}),i.children.splice(a+1,0,e)}),"left"===i&&this._traverse(function(i){var a;if(i.value.id===t)return i.children.map(function(e,t){e.value.id===n&&(a=t)}),i.children.splice(a,0,e)})}},{key:"_removeNode",value:function(e){this._traverse(function(t){t.children.forEach(function(n,i){n.value.id===e&&t.children.splice(i,1)})})}},{key:"_search",value:function(e){var t="Not Found";return this._traverse(function(n){n&&n.value.id===e&&(t=n)}),t}},{key:"_displayLeafs",value:function(e){var t=this,n="string"===typeof e?this._search(e):e,i=[];return(null===e||void 0===e?void 0:e.children)&&!e.children.length?e:(n&&n.children.forEach(function(e){i.push(t._displayLeafs(e))}),i.flat())}},{key:"_childPosition",value:function(e,t){var n;return this._search(e).children.map(function(e,i){e.value.id===t&&(n=i)}),n}}]),e}(),G=function(){return new F},B="isChild",M=G();M._addNode({group:"main",id:"te83nwko7b",name:"Root",root:!0,hasChildren:!1,children:[]});var W={tree:M},H=n(50),J=[{id:"asjahsada",title:"1",rate:0,hours:0,amount:0},{id:"wervsvsd",title:"2",rate:0,hours:0,amount:0}],V=J,U=Object(P.c)({tree:function(){var e,t,n,i,a,l,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,c=arguments.length>1?arguments[1]:void 0,d=c.cell,s=null===d||void 0===d?void 0:null===(e=d.value)||void 0===e?void 0:e.parentId,u=(null===d||void 0===d?void 0:null===(t=d.value)||void 0===t?void 0:t.siblingId)||c.siblingId,h=o.tree,v=null===h||void 0===h?void 0:h._search(s),p=null===v||void 0===v?void 0:null===(n=v.children)||void 0===n?void 0:n.length,f=null===v||void 0===v?void 0:null===(i=v.children)||void 0===i?void 0:i.length;switch(c.type){case"ADD_CHILD":return d.value.position=function(e,t){return 0===t&&e>0?"isFirstChild":t===e&&0!==t?"isLastChild":0!==t&&t<e&&e>2?"isChild":void 0}(f,p),v.children.length>1&&(v.children[f-1].value.position=B),1===f&&(v.children[0].value.position="isFirstChild"),v.value.hasChildren=!0,h._addNode(d,s),Object(T.a)({},o,{tree:h});case"APPEND_CHILD":r=d.value.position,h._removeNode(d.value.id),d.value.parentId=c.parentId,d.value.position="",h._addNode(d,c.parentId),h._search(c.parentId).value.hasChildren=!0;var m=h._search(h._search(c.parentId).value.parentId);return 1===m.children.length&&(m.children[0].value.position=""),f-1===1&&(v.children[0].position=""),l=h._childPosition(s,d.value.id),f-1>1&&"isFirstChild"===r&&(v.children[0].value.position="isFirstChild"),f-1>1&&"isLastChild"===r&&v&&(v.children[f-2].value.position="isLastChild"),console.log(h),Object(T.a)({},o,{tree:h});case"ADD_SIBLING":return 1===f&&(v.children[0].value.position="isFirstChild",d.value.position="isLastChild"),f>1&&l===f-1&&(d.value.position="isLastChild",v.children[f-1].value.position=B),f>1&&l!==f-1&&(d.value.position=B),h._addSibling(d,s,u,"right"),Object(T.a)({},o,{tree:h});case"APPEND_RIGHT_SIBLING":return s=h._search(u).value.parentId,l=h._childPosition(s,u),(r=null===h||void 0===h?void 0:h._childPosition(s,d.value.id))!==l+1&&r!==l&&(0===r&&l!==f-1&&(v.children[1].value.position="isFirstChild",d.value.position=B),0===r&&l===f-1&&2===f&&(v.children[1].value.position="isFirstChild",d.value.position="isLastChild"),0===r&&l===f-1&&f>2&&(v.children[1].value.position="isFirstChild",v.children[f-1].value.position=B,d.value.position="isLastChild"),0!==r&&l===f-1&&(d.value.position="isLastChild",v.children[f-2].value.position=B),r===f-1&&(v.children[f-2].value.position="isLastChild",d.value.position=B),f>2&&0!==r&&r!==f-1&&l===f-1&&(d.value.position="isLastChild",v.children[f-1].value.position=B),h._removeNode(d.value.id),h._addSibling(d,s,u,"right")),Object(T.a)({},o,{tree:h});case"APPEND_LEFT_SIBLING":return s=h._search(u).value.parentId,l=h._childPosition(s,u),(r=h._childPosition(s,d.value.id))!==l-1&&l!==r&&(0===l&&r!==f-1&&(d.value.position="isFirstChild",v.children[0].value.position=B),0===l&&r===f-1&&(d.value.position="isFirstChild",v.children[0].value.position=B,v.children[f-2].value.position="isLastChild"),0===r&&l===f-1&&(d.value.position=B,v.children[1].value.position="isFirstChild"),0!==l&&r===f-1&&(d.value.position=B,v.children[l].value.position="isLastChild"),h._removeNode(d.value.id),h._addSibling(d,s,u,"left")),Object(T.a)({},o,{tree:h});case"REMOVE_CELL":h._removeNode(d.id);var g=null===h||void 0===h?void 0:null===(a=h._search(d.parentId))||void 0===a?void 0:a.children.length;return h._search(d.parentId).children.length>1&&(h._search(d.parentId).children[0].value.position="isFirstChild",h._search(d.parentId).children[g-1].value.position="isLastChild"),1===h._search(d.parentId).children.length&&(h._search(d.parentId).children[0].value.position=""),1===h._search(d.parentId).children.length&&(h._search(d.parentId).children[0].value.position=""),Object(T.a)({},o,{tree:h});default:return o}},toggleEstimation:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=e.isOpen;switch(e.type){case"TOGGLE_ESTIMATION":return t;default:return!0}},estimation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,n=t.data;switch(t.type){case"ARRANGE_ROW":return J=n,Object(c.a)(J);case"ADD_ROW":var i={id:H(),title:"",rate:0,hours:0};return J.map(function(e){e.id!==n||J.push(i)}),Object(c.a)(J);case"REMOVE_ROW":return J=J.filter(function(e){return e.id!==n.id}),Object(c.a)(J);default:return e}}}),X=n(72),$=n.n(X),q=function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}},K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||P.d;var Q=function(){var e=Object(P.e)(U,K(Object(P.a)($.a)));return e.subscribe(function(){q(Object(T.a)({},e.getState().tree,e.getState().toggleEstimation,e.getState().estimation))}),e}();r.a.render(a.a.createElement(d.a,{store:Q},a.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t,n){e.exports=n(135)},86:function(e,t){}},[[75,1,2]]]);
//# sourceMappingURL=main.36dba319.chunk.js.map